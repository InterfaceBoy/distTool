{"remainingRequest":"/Users/heyuanpeng/个人项目/distTool/node_modules/babel-loader/lib/index.js!/Users/heyuanpeng/个人项目/distTool/node_modules/eslint-loader/index.js??ref--13-0!/Users/heyuanpeng/个人项目/distTool/src/utils/http.js","dependencies":[{"path":"/Users/heyuanpeng/个人项目/distTool/src/utils/http.js","mtime":1596174898338},{"path":"/Users/heyuanpeng/个人项目/distTool/node_modules/cache-loader/dist/cjs.js","mtime":1592459011967},{"path":"/Users/heyuanpeng/个人项目/distTool/node_modules/babel-loader/lib/index.js","mtime":1587105805867},{"path":"/Users/heyuanpeng/个人项目/distTool/node_modules/eslint-loader/index.js","mtime":1567574714613}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCi8qCiAqIEBBdXRob3I6IOS9leWFg+m5jwogKiBARGF0ZTogMjAxOS0xMS0yNSAxNzowMDowOAogKiBATGFzdEVkaXRvcnM6IOS9leWFg+m5jwogKiBATGFzdEVkaXRUaW1lOiAyMDIwLTA1LTI5IDEwOjU2OjUyCiAqIEBEZXNjcmlwdGlvbjogYXhpb3Mg5LqM5qyh5bCB6KOFCiAqLwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgaXZpZXcgZnJvbSAidmlldy1kZXNpZ24iOwoKdmFyIEh0dHBSZXF1ZXN0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBIdHRwUmVxdWVzdChfcmVmKSB7CiAgICB2YXIgQkFTRVVSTCA9IF9yZWYuQkFTRVVSTCwKICAgICAgICBfcmVmJFRJTUVPVVQgPSBfcmVmLlRJTUVPVVQsCiAgICAgICAgVElNRU9VVCA9IF9yZWYkVElNRU9VVCA9PT0gdm9pZCAwID8gNjAwMDAgKiAzIDogX3JlZiRUSU1FT1VULAogICAgICAgIF9yZWYkZXJyb3JIb29rID0gX3JlZi5lcnJvckhvb2ssCiAgICAgICAgZXJyb3JIb29rID0gX3JlZiRlcnJvckhvb2sgPT09IHZvaWQgMCA/IGZ1bmN0aW9uICgpIHt9IDogX3JlZiRlcnJvckhvb2s7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEh0dHBSZXF1ZXN0KTsKCiAgICB0aGlzLmNvbmZpZyA9IHsKICAgICAgYmFzZVVSTDogQkFTRVVSTCwKICAgICAgdGltZW91dDogVElNRU9VVCwKICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCiAgICB9OwogICAgdGhpcy5pbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZSh0aGlzLmNvbmZpZyk7IC8vIOivt+axgumUmeivr+mSqeWtkO+8jOWPr+S7peWcqOWklumdouazqOWGjOmUmeivr+Wbnuiwg+WkhOeQhgoKICAgIHRoaXMuZXJyb3JIb29rID0gZXJyb3JIb29rOyAvLyDlronoo4Xmi6bmiKrlmagKCiAgICB0aGlzLmludGVyY2VwdG9ycygpOwogICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7CiAgfSAvLyDmi6bmiKrlmagKCgogIF9jcmVhdGVDbGFzcyhIdHRwUmVxdWVzdCwgW3sKICAgIGtleTogImludGVyY2VwdG9ycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW50ZXJjZXB0b3JzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGluc3RhbmNlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzLmluc3RhbmNlOwogICAgICAvLyDor7fmsYLmi6bmiKoKICAgICAgaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgICByZXR1cm4gY29uZmlnOwogICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAvLyDor7fmsYLlpLHotKUKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgICB9KTsgLy8g5ZON5bqU5oum5oiqCgogICAgICBpbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBzdGF0dXMgPSByZXNwb25zZS5zdGF0dXMsCiAgICAgICAgICAgIGNvbmZpZyA9IHJlc3BvbnNlLmNvbmZpZzsKICAgICAgICB2YXIgc2hvd0Vycm9yTWVzc2FnZSA9IGNvbmZpZy5zaG93RXJyb3JNZXNzYWdlOyAvLyBzaG93RXJyb3JNZXNzYWdlIOS4jeS8oO+8jOm7mOiupOWxleekuumUmeivr+S/oeaBrwoKICAgICAgICBpZiAoc2hvd0Vycm9yTWVzc2FnZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBzaG93RXJyb3JNZXNzYWdlID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChzdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgdmFyIGNvZGUgPSBkYXRhLmNvZGUsCiAgICAgICAgICAgICAgbWVzc2FnZSA9IGRhdGEubWVzc2FnZSwKICAgICAgICAgICAgICBlcnJvciA9IGRhdGEuZXJyb3I7IC8vIGVycm9yIOWFvOWuuXNvZQoKICAgICAgICAgIGlmIChjb2RlICE9PSAxMDAwKSB7CiAgICAgICAgICAgIGlmIChtZXNzYWdlICE9PSAi5pyq55m75b2V5oiW55m75b2V5aSx5pWI77yM6K+36YeN5paw55m75b2VIikgewogICAgICAgICAgICAgIHNob3dFcnJvck1lc3NhZ2UgJiYgaXZpZXcuTWVzc2FnZS5lcnJvcih7CiAgICAgICAgICAgICAgICBjb250ZW50OiAiIi5jb25jYXQobWVzc2FnZSksCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpcy5lcnJvckhvb2socmVzcG9uc2UpOwoKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG1lc3NhZ2UpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgICBzaG93RXJyb3JNZXNzYWdlICYmIGl2aWV3Lk1lc3NhZ2UuZXJyb3IoIiIuY29uY2F0KGVycm9yLmNvZGUsICIgIikuY29uY2F0KGVycm9yLm1lc3NhZ2UpKTsKCiAgICAgICAgICAgIF90aGlzLmVycm9ySG9vayhyZXNwb25zZSk7CgogICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuZXJyb3JIb29rKHJlc3BvbnNlKTsKCiAgICAgICAgICByZXR1cm4gc2hvd0Vycm9yTWVzc2FnZSAmJiBpdmlldy5NZXNzYWdlLmVycm9yKHN0YXR1cyk7CiAgICAgICAgfQogICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfdGhpcy5lcnJvckhvb2soZXJyb3IucmVzcG9uc2UpOwoKICAgICAgICBpdmlldy5NZXNzYWdlLmVycm9yKGVycm9yLm1lc3NhZ2UpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvci5yZXNwb25zZSk7CiAgICAgIH0pOwogICAgfQogIH1dLCBbewogICAga2V5OiAiZ2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBheGlvcy5nZXQuYXBwbHkoYXhpb3MsIGFyZ3VtZW50cyk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSHR0cFJlcXVlc3Q7Cn0oKTsKCmV4cG9ydCB7IEh0dHBSZXF1ZXN0IGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/Users/heyuanpeng/个人项目/distTool/src/utils/http.js"],"names":["axios","iview","HttpRequest","BASEURL","TIMEOUT","errorHook","config","baseURL","timeout","withCredentials","instance","create","interceptors","request","use","error","Promise","reject","response","status","showErrorMessage","undefined","data","code","message","Message","content","duration","resolve","get"],"mappings":"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","sourcesContent":["/*\n * @Author: 何元鹏\n * @Date: 2019-11-25 17:00:08\n * @LastEditors: 何元鹏\n * @LastEditTime: 2020-05-29 10:56:52\n * @Description: axios 二次封装\n */\n\nimport axios from \"axios\";\nimport iview from \"view-design\";\n\nexport default class HttpRequest {\n  constructor({ BASEURL, TIMEOUT = 60000 * 3, errorHook = () => {} }) {\n    this.config = {\n      baseURL: BASEURL,\n      timeout: TIMEOUT,\n      withCredentials: true\n    };\n    this.instance = axios.create(this.config);\n    // 请求错误钩子，可以在外面注册错误回调处理\n    this.errorHook = errorHook;\n    // 安装拦截器\n    this.interceptors();\n    return this.instance;\n  }\n  // 拦截器\n  interceptors(instance = this.instance) {\n    // 请求拦截\n    instance.interceptors.request.use(\n      config => {\n        return config;\n      },\n      error => {\n        // 请求失败\n        return Promise.reject(error);\n      }\n    );\n    // 响应拦截\n    instance.interceptors.response.use(\n      response => {\n        const { status, config } = response;\n        let { showErrorMessage } = config;\n        // showErrorMessage 不传，默认展示错误信息\n        if (showErrorMessage === undefined) {\n          showErrorMessage = true;\n        }\n        if (status === 200) {\n          const { data } = response;\n          const { code, message, error } = data; // error 兼容soe\n          if (code !== 1000) {\n            if (message !== \"未登录或登录失效，请重新登录\") {\n              showErrorMessage &&\n                iview.Message.error({\n                  content: `${message}`,\n                  duration: 6\n                });\n            }\n            this.errorHook(response);\n            return Promise.reject(message);\n          }\n          if (error) {\n            showErrorMessage &&\n              iview.Message.error(`${error.code} ${error.message}`);\n            this.errorHook(response);\n            return Promise.reject(error.message);\n          }\n          return Promise.resolve(data);\n        } else {\n          this.errorHook(response);\n          return showErrorMessage && iview.Message.error(status);\n        }\n      },\n      error => {\n        this.errorHook(error.response);\n        iview.Message.error(error.message);\n        return Promise.reject(error.response);\n      }\n    );\n  }\n  static get(...args) {\n    return axios.get(...args);\n  }\n}\n"]}]}